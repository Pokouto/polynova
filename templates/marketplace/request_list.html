{% extends "base.html" %}
{% block content %}
<div class="bg-gray-50 min-h-screen py-8">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="text-center mb-10"><h1 class="text-3xl font-extrabold text-gray-900">Opportunités de Cours</h1><p class="mt-2 text-lg text-gray-500">Trouvez vos prochains élèves.</p></div>
        <div class="bg-white p-6 rounded-lg shadow-sm mb-8 flex gap-4 items-end border border-gray-100"><div class="flex-1 w-full"><label class="block text-sm font-medium text-gray-700 mb-1">Filtrer par Ville</label><form method="GET" class="flex gap-2"><select name="city" class="block w-full rounded-md border-gray-300 shadow-sm p-2 border bg-gray-50"><option value="">Toutes les villes</option>{% for c in cities %}<option value="{{ c.id }}" {% if request.GET.city|add:"0" == c.id %}selected{% endif %}>{{ c.name }}</option>{% endfor %}</select><button type="submit" class="bg-blue-600 text-white px-6 py-2 rounded-md hover:bg-blue-700 font-medium">Filtrer</button></form></div></div>
        <div class="grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3">
            {% for req in requests %}
            <div class="bg-white overflow-hidden shadow rounded-lg border border-gray-100 hover:shadow-lg transition flex flex-col">
                <div class="p-6 flex-1"><div class="flex items-center justify-between mb-4"><span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-bold bg-blue-100 text-blue-800 uppercase">{{ req.level.name }}</span><span class="text-xs text-gray-400">{{ req.created_at|timesince }}</span></div><h3 class="text-lg leading-6 font-bold text-gray-900 mb-3">Recherche prof de {% for sub in req.subjects.all|slice:":2" %}<span class="text-blue-600">{{ sub.name }}</span>{% if not forloop.last %}, {% endif %}{% endfor %}</h3><div class="space-y-2 mb-4"><div class="flex items-center text-sm text-gray-600"><i class="fas fa-map-marker-alt mr-3 text-gray-400 w-4 text-center"></i>{{ req.city.name }} - {{ req.quartier }}</div><div class="flex items-center text-sm text-gray-600"><i class="fas fa-wallet mr-3 text-gray-400 w-4 text-center"></i><span class="font-semibold text-green-600">{{ req.get_budget_range_display }}</span></div></div></div>
                <div class="px-6 py-4 bg-gray-50 border-t border-gray-100"><button class="w-full flex justify-center items-center bg-white text-blue-700 font-bold py-2 px-4 rounded border border-blue-200 hover:bg-blue-50 transition shadow-sm">Proposer mes services <i class="fas fa-arrow-right ml-2 text-sm"></i></button></div>
            </div>
            {% empty %}<div class="col-span-3 text-center py-16 bg-white rounded-xl border border-dashed border-gray-300"><h3 class="text-xl font-medium text-gray-900">Aucune demande active</h3></div>{% endfor %}
        </div>
    </div>
</div>
{% endblock %}