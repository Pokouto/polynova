{% extends "base.html" %}
{% block content %}
<div class="bg-gray-100 h-[calc(100vh-80px)] flex flex-col">
    <div class="bg-white border-b px-6 py-4 flex items-center shadow-sm">
        <a href="{% url 'inbox' %}" class="mr-4 text-gray-500 hover:text-blue-600"><i class="fas fa-arrow-left"></i></a>
        <div class="h-10 w-10 rounded-full bg-blue-100 flex items-center justify-center text-blue-700 font-bold mr-3">{{ other_user.username|slice:":1"|upper }}</div>
        <div><h2 class="font-bold text-gray-900">{{ other_user.first_name }} {{ other_user.last_name }}</h2><span class="text-xs text-green-500 font-bold">‚óè En ligne</span></div>
    </div>
    <div class="flex-1 overflow-y-auto p-6 space-y-4" id="chatContainer">
        {% for msg in messages_list %}
            <div class="flex {% if msg.sender == user %}justify-end{% else %}justify-start{% endif %}">
                <div class="max-w-[75%] {% if msg.sender == user %}bg-blue-600 text-white rounded-l-lg rounded-tr-lg{% else %}bg-white text-gray-800 border rounded-r-lg rounded-tl-lg{% endif %} px-4 py-2 shadow-sm">
                    <p class="text-sm">{{ msg.content }}</p><p class="text-[10px] opacity-75 text-right mt-1">{{ msg.created_at|date:"H:i" }}</p>
                </div>
            </div>
        {% endfor %}
    </div>
    <div class="bg-white border-t p-4"><form method="POST" class="flex gap-4 max-w-4xl mx-auto">{% csrf_token %}<div class="flex-1">{{ form.content }}</div><button type="submit" class="bg-blue-600 text-white rounded-full w-12 h-12 hover:bg-blue-700 shadow-md"><i class="fas fa-paper-plane"></i></button></form></div>
</div>
<script>const c=document.getElementById('chatContainer');c.scrollTop=c.scrollHeight;</script>
{% endblock %}